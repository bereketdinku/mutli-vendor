"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(ssr)/./node_modules/uploadthing/client/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/client/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   genUploader: () => (/* binding */ genUploader),\n/* harmony export */   generateClientDropzoneAccept: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateClientDropzoneAccept),\n/* harmony export */   generateMimeTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateMimeTypes),\n/* harmony export */   generatePermittedFileTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generatePermittedFileTypes),\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n/* harmony import */ var _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @effect/schema/Schema */ \"(ssr)/./node_modules/@effect/schema/dist/esm/Schema.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(ssr)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Cause */ \"(ssr)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var std_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! std-env */ \"(ssr)/./node_modules/std-env/dist/index.mjs\");\n\n\n\n\n\n\n\nvar version$1 = \"6.10.1\";\n\nconst uploadMultipartWithProgress = (file, presigned, opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n        let uploadedBytes = 0;\n        const etags = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(presigned.urls, (url, index)=>{\n            const offset = presigned.chunkSize * index;\n            const end = Math.min(offset + presigned.chunkSize, file.size);\n            const chunk = file.slice(offset, end);\n            return uploadPart({\n                url,\n                chunk: chunk,\n                contentDisposition: presigned.contentDisposition,\n                fileType: file.type,\n                fileName: file.name,\n                onProgress: (delta)=>{\n                    uploadedBytes += delta;\n                    const percent = uploadedBytes / file.size * 100;\n                    opts.onUploadProgress?.({\n                        file: file.name,\n                        progress: percent\n                    });\n                }\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen((tag)=>({\n                    tag,\n                    partNumber: index + 1\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.retry({\n                while: (error)=>error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError,\n                times: std_env__WEBPACK_IMPORTED_MODULE_2__.isTest ? 3 : 10,\n                schedule: _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.exponentialBackoff\n            }));\n        }, {\n            concurrency: \"inherit\"\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tapErrorCause((error)=>opts.reportEventToUT(\"failure\", {\n                fileKey: presigned.key,\n                uploadId: presigned.uploadId,\n                fileName: file.name,\n                storageProviderError: effect_Cause__WEBPACK_IMPORTED_MODULE_3__.pretty(error).toString()\n            }, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Null)));\n        // Tell the server that the upload is complete\n        yield* opts.reportEventToUT(\"multipart-complete\", {\n            uploadId: presigned.uploadId,\n            fileKey: presigned.key,\n            etags\n        }, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Null);\n    });\nconst uploadPart = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.async((resume)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.contentDisposition)(opts.contentDisposition, opts.fileName));\n        xhr.addEventListener(\"load\", ()=>{\n            const etag = xhr.getResponseHeader(\"Etag\");\n            if (xhr.status >= 200 && xhr.status <= 299 && etag) {\n                return resume(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(etag));\n            }\n            return resume(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError()));\n        });\n        xhr.addEventListener(\"error\", ()=>resume(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError())));\n        let lastProgress = 0;\n        xhr.upload.addEventListener(\"progress\", (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        });\n        xhr.send(opts.chunk);\n    });\n\nconst uploadPresignedPostWithProgress = (file, presigned, opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.async((resume)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", presigned.url);\n        xhr.setRequestHeader(\"Accept\", \"application/xml\");\n        xhr.upload.addEventListener(\"progress\", ({ loaded, total })=>{\n            opts.onUploadProgress?.({\n                file: file.name,\n                progress: loaded / total * 100\n            });\n        });\n        xhr.addEventListener(\"load\", ()=>resume(xhr.status >= 200 && xhr.status < 300 ? effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(null) : opts.reportEventToUT(\"failure\", {\n                fileKey: presigned.key,\n                uploadId: null,\n                fileName: file.name,\n                storageProviderError: xhr.responseText\n            }, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Null)));\n        xhr.addEventListener(\"error\", ()=>resume(opts.reportEventToUT(\"failure\", {\n                fileKey: presigned.key,\n                uploadId: null,\n                fileName: file.name\n            }, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Null)));\n        const formData = new FormData();\n        Object.entries(presigned.fields).forEach(([k, v])=>formData.append(k, v));\n        formData.append(\"file\", file); // File data **MUST GO LAST**\n        xhr.send(formData);\n    });\n\n/**\n * =============================================================================\n * ======================== File Type Hierarchy ===============================\n * =============================================================================\n */ const FileUploadDataSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    name: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    size: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Number,\n    type: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String\n});\nconst FileUploadDataWithCustomIdSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.extend(FileUploadDataSchema, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    customId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String)\n}));\n_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.extend(FileUploadDataWithCustomIdSchema, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    key: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    url: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String\n}));\n/**\n * =============================================================================\n * ======================== Server Response Schemas ============================\n * =============================================================================\n */ const PresignedBaseSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    key: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    fileName: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    fileType: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    fileUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    pollingJwt: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    pollingUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    contentDisposition: _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.ContentDispositionSchema,\n    customId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String)\n});\nconst MPUResponseSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.extend(PresignedBaseSchema, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    urls: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String),\n    uploadId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    chunkSize: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Number,\n    chunkCount: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Number\n}));\nconst PSPResponseSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.extend(PresignedBaseSchema, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    url: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    fields: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Record(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String)\n}));\nconst PresignedURLResponseSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Union(PSPResponseSchema, MPUResponseSchema));\n_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    fileData: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n        fileKey: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String),\n        fileName: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n        fileSize: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Number,\n        fileType: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n        metadata: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String),\n        customId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String),\n        callbackUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String),\n        callbackSlug: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String)\n    }))\n});\n_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    success: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Boolean,\n    message: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String)\n});\n_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String\n});\n/**\n * =============================================================================\n * ======================== Client Action Payloads ============================\n * =============================================================================\n */ _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    files: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Array(FileUploadDataSchema),\n    input: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Unknown\n});\n_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    fileKey: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    uploadId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String),\n    storageProviderError: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String),\n    fileName: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String\n});\n_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n    fileKey: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    uploadId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n    etags: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n        tag: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.String,\n        partNumber: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Number\n    }))\n});\n\nconst maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch?.[1];\n    const message = messageMatch?.[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\n/**\n * Map S3 error codes to UploadThing error codes\n *\n * This is a subset of the S3 error codes, based on what seemed most likely to\n * occur in uploadthing. For a full list of S3 error codes, see:\n * https://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html\n */ const DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nconst s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    EntityTooSmall: \"TOO_SMALL\",\n    EntityTooLarge: \"TOO_LARGE\",\n    ExpiredToken: \"FORBIDDEN\",\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\n\nconst createAPIRequestUrl = (config)=>{\n    const url = new URL(config.url);\n    const queryParams = new URLSearchParams(url.search);\n    queryParams.set(\"actionType\", config.actionType);\n    queryParams.set(\"slug\", config.slug);\n    url.search = queryParams.toString();\n    return url;\n};\n/**\n * Creates a \"client\" for reporting events to the UploadThing server via the user's API endpoint.\n * Events are handled in \"./handler.ts starting at L112\"\n */ const createUTReporter = (cfg)=>(type, payload, responseSchema)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n            const url = createAPIRequestUrl({\n                url: cfg.url,\n                slug: cfg.endpoint,\n                actionType: type\n            });\n            let headers = typeof cfg.headers === \"function\" ? cfg.headers() : cfg.headers;\n            if (headers instanceof Promise) {\n                headers = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.promise(()=>headers);\n            }\n            const response = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEffJson)(url, responseSchema, {\n                method: \"POST\",\n                body: JSON.stringify(payload),\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"x-uploadthing-package\": cfg.package,\n                    \"x-uploadthing-version\": version$1,\n                    ...headers\n                }\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"FetchError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_CLIENT_ERROR\",\n                    message: `Failed to report event \"${type}\" to UploadThing server`,\n                    cause: e\n                }))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ParseError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_CLIENT_ERROR\",\n                    message: \"Failed to parse response from UploadThing server\",\n                    cause: e\n                }))));\n            switch(type){\n                case \"failure\":\n                    {\n                        // why isn't this narrowed automatically?\n                        const p = payload;\n                        const parsed = maybeParseResponseXML(p.storageProviderError ?? \"\");\n                        if (parsed?.message) {\n                            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                                code: parsed.code,\n                                message: parsed.message\n                            });\n                        } else {\n                            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                                code: \"UPLOAD_FAILED\",\n                                message: `Failed to upload file ${p.fileName} to S3`,\n                                cause: p.storageProviderError\n                            });\n                        }\n                    }\n            }\n            return response;\n        });\n\nconst version = version$1;\nconst uploadFilesInternal = (endpoint, opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n        const reportEventToUT = createUTReporter({\n            endpoint: String(endpoint),\n            package: opts.package,\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.resolveMaybeUrlArg)(opts.url),\n            headers: opts.headers\n        });\n        const presigneds = yield* reportEventToUT(\"upload\", {\n            input: \"input\" in opts ? opts.input : null,\n            files: opts.files.map((f)=>({\n                    name: f.name,\n                    size: f.size,\n                    type: f.type\n                }))\n        }, PresignedURLResponseSchema);\n        return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(presigneds, (presigned)=>uploadFile(String(endpoint), {\n                ...opts,\n                reportEventToUT\n            }, presigned), {\n            concurrency: 6\n        });\n    });\nconst genUploader = (initOpts)=>{\n    return (endpoint, opts)=>uploadFilesInternal(endpoint, {\n            ...opts,\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.resolveMaybeUrlArg)(initOpts?.url),\n            package: initOpts.package,\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            input: opts.input\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, {\n            fetch: globalThis.fetch.bind(globalThis),\n            baseHeaders: {\n                \"x-uploadthing-version\": version$1,\n                \"x-uploadthing-api-key\": undefined,\n                \"x-uploadthing-fe-package\": initOpts.package,\n                \"x-uploadthing-be-adapter\": undefined\n            }\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.runPromise);\n};\nconst uploadFile = (slug, opts, presigned)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n        const file = opts.files.find((f)=>f.name === presigned.fileName);\n        if (!file) {\n            console.error(\"No file found for presigned URL\", presigned);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: \"No file found for presigned URL\",\n                cause: `Expected file with name ${presigned.fileName} but got '${opts.files.join(\",\")}'`\n            });\n        }\n        opts.onUploadBegin?.({\n            file: file.name\n        });\n        if (\"urls\" in presigned) {\n            yield* uploadMultipartWithProgress(file, presigned, opts);\n        } else {\n            yield* uploadPresignedPostWithProgress(file, presigned, opts);\n        }\n        const PollingResponse = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Union(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n            status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Literal(\"done\"),\n            callbackData: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Any\n        }), _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Struct({\n            status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_4__.Literal(\"still waiting\")\n        }));\n        let serverData = null;\n        if (!opts.skipPolling) {\n            serverData = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEffJson)(presigned.pollingUrl, PollingResponse, {\n                headers: {\n                    authorization: presigned.pollingJwt\n                }\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen((res)=>res.status === \"done\" ? effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(res.callbackData) : effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError())), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.retry({\n                while: (res)=>res instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError,\n                schedule: _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.exponentialBackoff\n            }));\n        }\n        return {\n            name: file.name,\n            size: file.size,\n            key: presigned.key,\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            serverData: serverData,\n            url: \"https://utfs.io/f/\" + presigned.key,\n            customId: presigned.customId,\n            type: file.type\n        };\n    });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvY2xpZW50L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDSDtBQUM2STtBQUNuRTtBQUM1RTtBQUNMOztBQUVqQzs7QUFFQSw2REFBNkQsOENBQVU7QUFDdkU7QUFDQSw2QkFBNkIsa0RBQWM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYSxPQUFPLGtEQUFjO0FBQ2xDO0FBQ0E7QUFDQSxpQkFBaUIsSUFBSSxnREFBWTtBQUNqQyxpREFBaUQsMkRBQVU7QUFDM0QsdUJBQXVCLDJDQUFNO0FBQzdCLDBCQUEwQixtRUFBa0I7QUFDNUMsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLFNBQVMsT0FBTyx3REFBb0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdEQUFZO0FBQ2xELGFBQWEsRUFBRSx1REFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxFQUFFLHVEQUFNO0FBQ2pCLEtBQUs7QUFDTCwyQkFBMkIsZ0RBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHVFQUFrQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0RBQWM7QUFDNUM7QUFDQSwwQkFBMEIsK0NBQVcsS0FBSywyREFBVTtBQUNwRCxTQUFTO0FBQ1QsaURBQWlELCtDQUFXLEtBQUssMkRBQVU7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7O0FBRUwsaUVBQWlFLGdEQUFZO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxlQUFlO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Qsd0ZBQXdGLGtEQUFjO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxF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RCxvQkFBb0IsMERBQVM7QUFDN0IsMEJBQTBCLHNEQUFLO0FBQy9CLFNBQVMsR0FBRyx5REFBUTtBQUNwQixvQkFBb0IsMERBQVM7QUFDN0IsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQ0FBZ0MsaUVBQVk7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPLGtEQUFjLGdDQUFnQyxrREFBYyxxQkFBcUIsK0NBQVcsS0FBSywyREFBVSxNQUFNLGdEQUFZO0FBQ2pKLDZDQUE2QywyREFBVTtBQUN2RCwwQkFBMEIsbUVBQWtCO0FBQzVDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFMkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9jbGllbnQvaW5kZXguanM/ZGVkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBTIGZyb20gJ0BlZmZlY3Qvc2NoZW1hL1NjaGVtYSc7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgeyBSZXRyeUVycm9yLCBleHBvbmVudGlhbEJhY2tvZmYsIGNvbnRlbnREaXNwb3NpdGlvbiwgQ29udGVudERpc3Bvc2l0aW9uU2NoZW1hLCBmZXRjaEVmZkpzb24sIFVwbG9hZFRoaW5nRXJyb3IsIHJlc29sdmVNYXliZVVybEFyZywgRmV0Y2hDb250ZXh0IH0gZnJvbSAnQHVwbG9hZHRoaW5nL3NoYXJlZCc7XG5leHBvcnQgeyBnZW5lcmF0ZUNsaWVudERyb3B6b25lQWNjZXB0LCBnZW5lcmF0ZU1pbWVUeXBlcywgZ2VuZXJhdGVQZXJtaXR0ZWRGaWxlVHlwZXMgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCAqIGFzIENhdXNlIGZyb20gJ2VmZmVjdC9DYXVzZSc7XG5pbXBvcnQgeyBpc1Rlc3QgfSBmcm9tICdzdGQtZW52JztcblxudmFyIHZlcnNpb24kMSA9IFwiNi4xMC4xXCI7XG5cbmNvbnN0IHVwbG9hZE11bHRpcGFydFdpdGhQcm9ncmVzcyA9IChmaWxlLCBwcmVzaWduZWQsIG9wdHMpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgbGV0IHVwbG9hZGVkQnl0ZXMgPSAwO1xuICAgICAgICBjb25zdCBldGFncyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChwcmVzaWduZWQudXJscywgKHVybCwgaW5kZXgpPT57XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBwcmVzaWduZWQuY2h1bmtTaXplICogaW5kZXg7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihvZmZzZXQgKyBwcmVzaWduZWQuY2h1bmtTaXplLCBmaWxlLnNpemUpO1xuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBmaWxlLnNsaWNlKG9mZnNldCwgZW5kKTtcbiAgICAgICAgICAgIHJldHVybiB1cGxvYWRQYXJ0KHtcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgY2h1bms6IGNodW5rLFxuICAgICAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogcHJlc2lnbmVkLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgICAgICBmaWxlVHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzczogKGRlbHRhKT0+e1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRlZEJ5dGVzICs9IGRlbHRhO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50ID0gdXBsb2FkZWRCeXRlcyAvIGZpbGUuc2l6ZSAqIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5vblVwbG9hZFByb2dyZXNzPy4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHBlcmNlbnRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkucGlwZShFZmZlY3QuYW5kVGhlbigodGFnKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgdGFnLFxuICAgICAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiBpbmRleCArIDFcbiAgICAgICAgICAgICAgICB9KSksIEVmZmVjdC5yZXRyeSh7XG4gICAgICAgICAgICAgICAgd2hpbGU6IChlcnJvcik9PmVycm9yIGluc3RhbmNlb2YgUmV0cnlFcnJvcixcbiAgICAgICAgICAgICAgICB0aW1lczogaXNUZXN0ID8gMyA6IDEwLFxuICAgICAgICAgICAgICAgIHNjaGVkdWxlOiBleHBvbmVudGlhbEJhY2tvZmZcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY29uY3VycmVuY3k6IFwiaW5oZXJpdFwiXG4gICAgICAgIH0pLnBpcGUoRWZmZWN0LnRhcEVycm9yQ2F1c2UoKGVycm9yKT0+b3B0cy5yZXBvcnRFdmVudFRvVVQoXCJmYWlsdXJlXCIsIHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgICAgIHVwbG9hZElkOiBwcmVzaWduZWQudXBsb2FkSWQsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICBzdG9yYWdlUHJvdmlkZXJFcnJvcjogQ2F1c2UucHJldHR5KGVycm9yKS50b1N0cmluZygpXG4gICAgICAgICAgICB9LCBTLk51bGwpKSk7XG4gICAgICAgIC8vIFRlbGwgdGhlIHNlcnZlciB0aGF0IHRoZSB1cGxvYWQgaXMgY29tcGxldGVcbiAgICAgICAgeWllbGQqIG9wdHMucmVwb3J0RXZlbnRUb1VUKFwibXVsdGlwYXJ0LWNvbXBsZXRlXCIsIHtcbiAgICAgICAgICAgIHVwbG9hZElkOiBwcmVzaWduZWQudXBsb2FkSWQsXG4gICAgICAgICAgICBmaWxlS2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgZXRhZ3NcbiAgICAgICAgfSwgUy5OdWxsKTtcbiAgICB9KTtcbmNvbnN0IHVwbG9hZFBhcnQgPSAob3B0cyk9PkVmZmVjdC5hc3luYygocmVzdW1lKT0+e1xuICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9wZW4oXCJQVVRcIiwgb3B0cy51cmwsIHRydWUpO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBvcHRzLmZpbGVUeXBlKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsIGNvbnRlbnREaXNwb3NpdGlvbihvcHRzLmNvbnRlbnREaXNwb3NpdGlvbiwgb3B0cy5maWxlTmFtZSkpO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCk9PntcbiAgICAgICAgICAgIGNvbnN0IGV0YWcgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJFdGFnXCIpO1xuICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPD0gMjk5ICYmIGV0YWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdW1lKEVmZmVjdC5zdWNjZWVkKGV0YWcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bWUoRWZmZWN0LmZhaWwobmV3IFJldHJ5RXJyb3IoKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKT0+cmVzdW1lKEVmZmVjdC5mYWlsKG5ldyBSZXRyeUVycm9yKCkpKSk7XG4gICAgICAgIGxldCBsYXN0UHJvZ3Jlc3MgPSAwO1xuICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCAoZSk9PntcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZS5sb2FkZWQgLSBsYXN0UHJvZ3Jlc3M7XG4gICAgICAgICAgICBsYXN0UHJvZ3Jlc3MgKz0gZGVsdGE7XG4gICAgICAgICAgICBvcHRzLm9uUHJvZ3Jlc3MoZGVsdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgeGhyLnNlbmQob3B0cy5jaHVuayk7XG4gICAgfSk7XG5cbmNvbnN0IHVwbG9hZFByZXNpZ25lZFBvc3RXaXRoUHJvZ3Jlc3MgPSAoZmlsZSwgcHJlc2lnbmVkLCBvcHRzKT0+RWZmZWN0LmFzeW5jKChyZXN1bWUpPT57XG4gICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgcHJlc2lnbmVkLnVybCk7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24veG1sXCIpO1xuICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCAoeyBsb2FkZWQsIHRvdGFsIH0pPT57XG4gICAgICAgICAgICBvcHRzLm9uVXBsb2FkUHJvZ3Jlc3M/Lih7XG4gICAgICAgICAgICAgICAgZmlsZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBsb2FkZWQgLyB0b3RhbCAqIDEwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCk9PnJlc3VtZSh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwID8gRWZmZWN0LnN1Y2NlZWQobnVsbCkgOiBvcHRzLnJlcG9ydEV2ZW50VG9VVChcImZhaWx1cmVcIiwge1xuICAgICAgICAgICAgICAgIGZpbGVLZXk6IHByZXNpZ25lZC5rZXksXG4gICAgICAgICAgICAgICAgdXBsb2FkSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICBzdG9yYWdlUHJvdmlkZXJFcnJvcjogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgICAgICAgfSwgUy5OdWxsKSkpO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsICgpPT5yZXN1bWUob3B0cy5yZXBvcnRFdmVudFRvVVQoXCJmYWlsdXJlXCIsIHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgICAgIHVwbG9hZElkOiBudWxsLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWVcbiAgICAgICAgICAgIH0sIFMuTnVsbCkpKTtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocHJlc2lnbmVkLmZpZWxkcykuZm9yRWFjaCgoW2ssIHZdKT0+Zm9ybURhdGEuYXBwZW5kKGssIHYpKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTsgLy8gRmlsZSBkYXRhICoqTVVTVCBHTyBMQVNUKipcbiAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xuICAgIH0pO1xuXG4vKipcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT0gRmlsZSBUeXBlIEhpZXJhcmNoeSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovIGNvbnN0IEZpbGVVcGxvYWREYXRhU2NoZW1hID0gUy5TdHJ1Y3Qoe1xuICAgIG5hbWU6IFMuU3RyaW5nLFxuICAgIHNpemU6IFMuTnVtYmVyLFxuICAgIHR5cGU6IFMuU3RyaW5nXG59KTtcbmNvbnN0IEZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkU2NoZW1hID0gUy5leHRlbmQoRmlsZVVwbG9hZERhdGFTY2hlbWEsIFMuU3RydWN0KHtcbiAgICBjdXN0b21JZDogUy5OdWxsT3IoUy5TdHJpbmcpXG59KSk7XG5TLmV4dGVuZChGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZFNjaGVtYSwgUy5TdHJ1Y3Qoe1xuICAgIGtleTogUy5TdHJpbmcsXG4gICAgdXJsOiBTLlN0cmluZ1xufSkpO1xuLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09IFNlcnZlciBSZXNwb25zZSBTY2hlbWFzID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi8gY29uc3QgUHJlc2lnbmVkQmFzZVNjaGVtYSA9IFMuU3RydWN0KHtcbiAgICBrZXk6IFMuU3RyaW5nLFxuICAgIGZpbGVOYW1lOiBTLlN0cmluZyxcbiAgICBmaWxlVHlwZTogUy5TdHJpbmcsXG4gICAgZmlsZVVybDogUy5TdHJpbmcsXG4gICAgcG9sbGluZ0p3dDogUy5TdHJpbmcsXG4gICAgcG9sbGluZ1VybDogUy5TdHJpbmcsXG4gICAgY29udGVudERpc3Bvc2l0aW9uOiBDb250ZW50RGlzcG9zaXRpb25TY2hlbWEsXG4gICAgY3VzdG9tSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKVxufSk7XG5jb25zdCBNUFVSZXNwb25zZVNjaGVtYSA9IFMuZXh0ZW5kKFByZXNpZ25lZEJhc2VTY2hlbWEsIFMuU3RydWN0KHtcbiAgICB1cmxzOiBTLkFycmF5KFMuU3RyaW5nKSxcbiAgICB1cGxvYWRJZDogUy5TdHJpbmcsXG4gICAgY2h1bmtTaXplOiBTLk51bWJlcixcbiAgICBjaHVua0NvdW50OiBTLk51bWJlclxufSkpO1xuY29uc3QgUFNQUmVzcG9uc2VTY2hlbWEgPSBTLmV4dGVuZChQcmVzaWduZWRCYXNlU2NoZW1hLCBTLlN0cnVjdCh7XG4gICAgdXJsOiBTLlN0cmluZyxcbiAgICBmaWVsZHM6IFMuUmVjb3JkKFMuU3RyaW5nLCBTLlN0cmluZylcbn0pKTtcbmNvbnN0IFByZXNpZ25lZFVSTFJlc3BvbnNlU2NoZW1hID0gUy5BcnJheShTLlVuaW9uKFBTUFJlc3BvbnNlU2NoZW1hLCBNUFVSZXNwb25zZVNjaGVtYSkpO1xuUy5TdHJ1Y3Qoe1xuICAgIHN0YXR1czogUy5TdHJpbmcsXG4gICAgZmlsZURhdGE6IFMub3B0aW9uYWwoUy5TdHJ1Y3Qoe1xuICAgICAgICBmaWxlS2V5OiBTLk51bGxPcihTLlN0cmluZyksXG4gICAgICAgIGZpbGVOYW1lOiBTLlN0cmluZyxcbiAgICAgICAgZmlsZVNpemU6IFMuTnVtYmVyLFxuICAgICAgICBmaWxlVHlwZTogUy5TdHJpbmcsXG4gICAgICAgIG1ldGFkYXRhOiBTLk51bGxPcihTLlN0cmluZyksXG4gICAgICAgIGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZyksXG4gICAgICAgIGNhbGxiYWNrVXJsOiBTLm9wdGlvbmFsKFMuU3RyaW5nKSxcbiAgICAgICAgY2FsbGJhY2tTbHVnOiBTLm9wdGlvbmFsKFMuU3RyaW5nKVxuICAgIH0pKVxufSk7XG5TLlN0cnVjdCh7XG4gICAgc3VjY2VzczogUy5Cb29sZWFuLFxuICAgIG1lc3NhZ2U6IFMub3B0aW9uYWwoUy5TdHJpbmcpXG59KTtcblMuU3RydWN0KHtcbiAgICBzdGF0dXM6IFMuU3RyaW5nXG59KTtcbi8qKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PSBDbGllbnQgQWN0aW9uIFBheWxvYWRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi8gUy5TdHJ1Y3Qoe1xuICAgIGZpbGVzOiBTLkFycmF5KEZpbGVVcGxvYWREYXRhU2NoZW1hKSxcbiAgICBpbnB1dDogUy5Vbmtub3duXG59KTtcblMuU3RydWN0KHtcbiAgICBmaWxlS2V5OiBTLlN0cmluZyxcbiAgICB1cGxvYWRJZDogUy5OdWxsT3IoUy5TdHJpbmcpLFxuICAgIHN0b3JhZ2VQcm92aWRlckVycm9yOiBTLm9wdGlvbmFsKFMuU3RyaW5nKSxcbiAgICBmaWxlTmFtZTogUy5TdHJpbmdcbn0pO1xuUy5TdHJ1Y3Qoe1xuICAgIGZpbGVLZXk6IFMuU3RyaW5nLFxuICAgIHVwbG9hZElkOiBTLlN0cmluZyxcbiAgICBldGFnczogUy5BcnJheShTLlN0cnVjdCh7XG4gICAgICAgIHRhZzogUy5TdHJpbmcsXG4gICAgICAgIHBhcnROdW1iZXI6IFMuTnVtYmVyXG4gICAgfSkpXG59KTtcblxuY29uc3QgbWF5YmVQYXJzZVJlc3BvbnNlWE1MID0gKG1heWJlWG1sKT0+e1xuICAgIGNvbnN0IGNvZGVNYXRjaCA9IG1heWJlWG1sLm1hdGNoKC88Q29kZT4oLio/KTxcXC9Db2RlPi9zKTtcbiAgICBjb25zdCBtZXNzYWdlTWF0Y2ggPSBtYXliZVhtbC5tYXRjaCgvPE1lc3NhZ2U+KC4qPyk8XFwvTWVzc2FnZT4vcyk7XG4gICAgY29uc3QgY29kZSA9IGNvZGVNYXRjaD8uWzFdO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlTWF0Y2g/LlsxXTtcbiAgICBpZiAoIWNvZGUgfHwgIW1lc3NhZ2UpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvZGU6IHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlW2NvZGVdID8/IERFRkFVTFRfRVJST1JfQ09ERSxcbiAgICAgICAgbWVzc2FnZVxuICAgIH07XG59O1xuLyoqXG4gKiBNYXAgUzMgZXJyb3IgY29kZXMgdG8gVXBsb2FkVGhpbmcgZXJyb3IgY29kZXNcbiAqXG4gKiBUaGlzIGlzIGEgc3Vic2V0IG9mIHRoZSBTMyBlcnJvciBjb2RlcywgYmFzZWQgb24gd2hhdCBzZWVtZWQgbW9zdCBsaWtlbHkgdG9cbiAqIG9jY3VyIGluIHVwbG9hZHRoaW5nLiBGb3IgYSBmdWxsIGxpc3Qgb2YgUzMgZXJyb3IgY29kZXMsIHNlZTpcbiAqIGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9BbWF6b25TMy9sYXRlc3QvQVBJL0Vycm9yUmVzcG9uc2VzLmh0bWxcbiAqLyBjb25zdCBERUZBVUxUX0VSUk9SX0NPREUgPSBcIlVQTE9BRF9GQUlMRURcIjtcbmNvbnN0IHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlID0ge1xuICAgIEFjY2Vzc0RlbmllZDogXCJGT1JCSURERU5cIixcbiAgICBFbnRpdHlUb29TbWFsbDogXCJUT09fU01BTExcIixcbiAgICBFbnRpdHlUb29MYXJnZTogXCJUT09fTEFSR0VcIixcbiAgICBFeHBpcmVkVG9rZW46IFwiRk9SQklEREVOXCIsXG4gICAgSW5jb3JyZWN0TnVtYmVyT2ZGaWxlc0luUG9zdFJlcXVlc3Q6IFwiVE9PX01BTllfRklMRVNcIixcbiAgICBJbnRlcm5hbEVycm9yOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgIEtleVRvb0xvbmdFcnJvcjogXCJLRVlfVE9PX0xPTkdcIixcbiAgICBNYXhNZXNzYWdlTGVuZ3RoRXhjZWVkZWQ6IFwiVE9PX0xBUkdFXCJcbn07XG5cbmNvbnN0IGNyZWF0ZUFQSVJlcXVlc3RVcmwgPSAoY29uZmlnKT0+e1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoY29uZmlnLnVybCk7XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybC5zZWFyY2gpO1xuICAgIHF1ZXJ5UGFyYW1zLnNldChcImFjdGlvblR5cGVcIiwgY29uZmlnLmFjdGlvblR5cGUpO1xuICAgIHF1ZXJ5UGFyYW1zLnNldChcInNsdWdcIiwgY29uZmlnLnNsdWcpO1xuICAgIHVybC5zZWFyY2ggPSBxdWVyeVBhcmFtcy50b1N0cmluZygpO1xuICAgIHJldHVybiB1cmw7XG59O1xuLyoqXG4gKiBDcmVhdGVzIGEgXCJjbGllbnRcIiBmb3IgcmVwb3J0aW5nIGV2ZW50cyB0byB0aGUgVXBsb2FkVGhpbmcgc2VydmVyIHZpYSB0aGUgdXNlcidzIEFQSSBlbmRwb2ludC5cbiAqIEV2ZW50cyBhcmUgaGFuZGxlZCBpbiBcIi4vaGFuZGxlci50cyBzdGFydGluZyBhdCBMMTEyXCJcbiAqLyBjb25zdCBjcmVhdGVVVFJlcG9ydGVyID0gKGNmZyk9Pih0eXBlLCBwYXlsb2FkLCByZXNwb25zZVNjaGVtYSk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gY3JlYXRlQVBJUmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBjZmcudXJsLFxuICAgICAgICAgICAgICAgIHNsdWc6IGNmZy5lbmRwb2ludCxcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlOiB0eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzID0gdHlwZW9mIGNmZy5oZWFkZXJzID09PSBcImZ1bmN0aW9uXCIgPyBjZmcuaGVhZGVycygpIDogY2ZnLmhlYWRlcnM7XG4gICAgICAgICAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzID0geWllbGQqIEVmZmVjdC5wcm9taXNlKCgpPT5oZWFkZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQqIGZldGNoRWZmSnNvbih1cmwsIHJlc3BvbnNlU2NoZW1hLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctcGFja2FnZVwiOiBjZmcucGFja2FnZSxcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbiQxLFxuICAgICAgICAgICAgICAgICAgICAuLi5oZWFkZXJzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJGZXRjaEVycm9yXCIsIChlKT0+RWZmZWN0LmZhaWwobmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX0NMSUVOVF9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIHJlcG9ydCBldmVudCBcIiR7dHlwZX1cIiB0byBVcGxvYWRUaGluZyBzZXJ2ZXJgLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICAgICAgICAgIH0pKSksIEVmZmVjdC5jYXRjaFRhZyhcIlBhcnNlRXJyb3JcIiwgKGUpPT5FZmZlY3QuZmFpbChuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfQ0xJRU5UX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlIGZyb20gVXBsb2FkVGhpbmcgc2VydmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBlXG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICBzd2l0Y2godHlwZSl7XG4gICAgICAgICAgICAgICAgY2FzZSBcImZhaWx1cmVcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2h5IGlzbid0IHRoaXMgbmFycm93ZWQgYXV0b21hdGljYWxseT9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBwYXlsb2FkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gbWF5YmVQYXJzZVJlc3BvbnNlWE1MKHAuc3RvcmFnZVByb3ZpZGVyRXJyb3IgPz8gXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkPy5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IHBhcnNlZC5jb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBwYXJzZWQubWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gdXBsb2FkIGZpbGUgJHtwLmZpbGVOYW1lfSB0byBTM2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlOiBwLnN0b3JhZ2VQcm92aWRlckVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSk7XG5cbmNvbnN0IHZlcnNpb24gPSB2ZXJzaW9uJDE7XG5jb25zdCB1cGxvYWRGaWxlc0ludGVybmFsID0gKGVuZHBvaW50LCBvcHRzKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHJlcG9ydEV2ZW50VG9VVCA9IGNyZWF0ZVVUUmVwb3J0ZXIoe1xuICAgICAgICAgICAgZW5kcG9pbnQ6IFN0cmluZyhlbmRwb2ludCksXG4gICAgICAgICAgICBwYWNrYWdlOiBvcHRzLnBhY2thZ2UsXG4gICAgICAgICAgICB1cmw6IHJlc29sdmVNYXliZVVybEFyZyhvcHRzLnVybCksXG4gICAgICAgICAgICBoZWFkZXJzOiBvcHRzLmhlYWRlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHByZXNpZ25lZHMgPSB5aWVsZCogcmVwb3J0RXZlbnRUb1VUKFwidXBsb2FkXCIsIHtcbiAgICAgICAgICAgIGlucHV0OiBcImlucHV0XCIgaW4gb3B0cyA/IG9wdHMuaW5wdXQgOiBudWxsLFxuICAgICAgICAgICAgZmlsZXM6IG9wdHMuZmlsZXMubWFwKChmKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmLnNpemUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGYudHlwZVxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICB9LCBQcmVzaWduZWRVUkxSZXNwb25zZVNjaGVtYSk7XG4gICAgICAgIHJldHVybiB5aWVsZCogRWZmZWN0LmZvckVhY2gocHJlc2lnbmVkcywgKHByZXNpZ25lZCk9PnVwbG9hZEZpbGUoU3RyaW5nKGVuZHBvaW50KSwge1xuICAgICAgICAgICAgICAgIC4uLm9wdHMsXG4gICAgICAgICAgICAgICAgcmVwb3J0RXZlbnRUb1VUXG4gICAgICAgICAgICB9LCBwcmVzaWduZWQpLCB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeTogNlxuICAgICAgICB9KTtcbiAgICB9KTtcbmNvbnN0IGdlblVwbG9hZGVyID0gKGluaXRPcHRzKT0+e1xuICAgIHJldHVybiAoZW5kcG9pbnQsIG9wdHMpPT51cGxvYWRGaWxlc0ludGVybmFsKGVuZHBvaW50LCB7XG4gICAgICAgICAgICAuLi5vcHRzLFxuICAgICAgICAgICAgdXJsOiByZXNvbHZlTWF5YmVVcmxBcmcoaW5pdE9wdHM/LnVybCksXG4gICAgICAgICAgICBwYWNrYWdlOiBpbml0T3B0cy5wYWNrYWdlLFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgICAgaW5wdXQ6IG9wdHMuaW5wdXRcbiAgICAgICAgfSkucGlwZShFZmZlY3QucHJvdmlkZVNlcnZpY2UoRmV0Y2hDb250ZXh0LCB7XG4gICAgICAgICAgICBmZXRjaDogZ2xvYmFsVGhpcy5mZXRjaC5iaW5kKGdsb2JhbFRoaXMpLFxuICAgICAgICAgICAgYmFzZUhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uJDEsXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGluaXRPcHRzLnBhY2thZ2UsXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBFZmZlY3QucnVuUHJvbWlzZSk7XG59O1xuY29uc3QgdXBsb2FkRmlsZSA9IChzbHVnLCBvcHRzLCBwcmVzaWduZWQpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgZmlsZSA9IG9wdHMuZmlsZXMuZmluZCgoZik9PmYubmFtZSA9PT0gcHJlc2lnbmVkLmZpbGVOYW1lKTtcbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gZmlsZSBmb3VuZCBmb3IgcHJlc2lnbmVkIFVSTFwiLCBwcmVzaWduZWQpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5vIGZpbGUgZm91bmQgZm9yIHByZXNpZ25lZCBVUkxcIixcbiAgICAgICAgICAgICAgICBjYXVzZTogYEV4cGVjdGVkIGZpbGUgd2l0aCBuYW1lICR7cHJlc2lnbmVkLmZpbGVOYW1lfSBidXQgZ290ICcke29wdHMuZmlsZXMuam9pbihcIixcIil9J2BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG9wdHMub25VcGxvYWRCZWdpbj8uKHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUubmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKFwidXJsc1wiIGluIHByZXNpZ25lZCkge1xuICAgICAgICAgICAgeWllbGQqIHVwbG9hZE11bHRpcGFydFdpdGhQcm9ncmVzcyhmaWxlLCBwcmVzaWduZWQsIG9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeWllbGQqIHVwbG9hZFByZXNpZ25lZFBvc3RXaXRoUHJvZ3Jlc3MoZmlsZSwgcHJlc2lnbmVkLCBvcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBQb2xsaW5nUmVzcG9uc2UgPSBTLlVuaW9uKFMuU3RydWN0KHtcbiAgICAgICAgICAgIHN0YXR1czogUy5MaXRlcmFsKFwiZG9uZVwiKSxcbiAgICAgICAgICAgIGNhbGxiYWNrRGF0YTogUy5BbnlcbiAgICAgICAgfSksIFMuU3RydWN0KHtcbiAgICAgICAgICAgIHN0YXR1czogUy5MaXRlcmFsKFwic3RpbGwgd2FpdGluZ1wiKVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBzZXJ2ZXJEYXRhID0gbnVsbDtcbiAgICAgICAgaWYgKCFvcHRzLnNraXBQb2xsaW5nKSB7XG4gICAgICAgICAgICBzZXJ2ZXJEYXRhID0geWllbGQqIGZldGNoRWZmSnNvbihwcmVzaWduZWQucG9sbGluZ1VybCwgUG9sbGluZ1Jlc3BvbnNlLCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBwcmVzaWduZWQucG9sbGluZ0p3dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnBpcGUoRWZmZWN0LmFuZFRoZW4oKHJlcyk9PnJlcy5zdGF0dXMgPT09IFwiZG9uZVwiID8gRWZmZWN0LnN1Y2NlZWQocmVzLmNhbGxiYWNrRGF0YSkgOiBFZmZlY3QuZmFpbChuZXcgUmV0cnlFcnJvcigpKSksIEVmZmVjdC5yZXRyeSh7XG4gICAgICAgICAgICAgICAgd2hpbGU6IChyZXMpPT5yZXMgaW5zdGFuY2VvZiBSZXRyeUVycm9yLFxuICAgICAgICAgICAgICAgIHNjaGVkdWxlOiBleHBvbmVudGlhbEJhY2tvZmZcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAga2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICAgICAgc2VydmVyRGF0YTogc2VydmVyRGF0YSxcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL3V0ZnMuaW8vZi9cIiArIHByZXNpZ25lZC5rZXksXG4gICAgICAgICAgICBjdXN0b21JZDogcHJlc2lnbmVkLmN1c3RvbUlkLFxuICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlXG4gICAgICAgIH07XG4gICAgfSk7XG5cbmV4cG9ydCB7IGdlblVwbG9hZGVyLCB2ZXJzaW9uIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/client/index.js\n");

/***/ })

};
;